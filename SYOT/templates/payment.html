{% extends 'base.html' %}
{% load staticfiles %}

{% block addcssjs %}

    <link rel="stylesheet" type="text/css" href="{% static 'css/payment.css' %}">
	<script type="text/javascript">
        Stripe.setPublishableKey('{{ publishKey }}');
        function stripeResponseHandler(status, response){
            var $form = $('#payment-form');
            if(response.error) {
                $form.find('.payment-errors').text(response.error.message);
                $form.find('.submit').prop('disabled',false);
            } else{
                var token = response.id;
                $form.append($('<input type="hidden" name="stripeToken">').val(token));
                $form.get(0).submit();
            }
        };
    </script>
{% endblock %}

{% block jquery %}
    $(function(){
    var $form = $('#payment-form');
    $form.submit(function(event){
        $form.find('.submit').prop('disabled',true);
        Stripe.card.createToken($form,stripeResponseHandler);
        return false;
    });
});
{% endblock %}

{% block content %}

<!--payment section-->
	<!-- <div id="picture" class="col-sm-6" style="background-color:white ;">
		<img src="images/credit.png">
	</div>

	<div id="text" class="col-sm-3" style="background-color:white ;">Payment Details
	 	<div class="textinput">Name on Card <input type="text" class="card" placeholder="Name on Card"></div>
	 	<div class="textinput">Card Number <input type="text" class="card" maxlength="16" placeholder="Card Number" onkeypress='return event.charCode >= 48 && event.charCode <= 57'/></div>
	 	<div class="textinput">
	 		<div>Valid Through &emsp; &emsp; &emsp;&emsp;CVV</div>
	 		<input type="text" maxlength="7" class="cardvalid" placeholder="MM/YYYY" onkeypress='return event.charCode >= 48 &&  event.charCode== / && event.charCode <= 57'/>
	 		<input type="text" maxlength="3" class="cardcvv" placeholder="CVV" onkeypress='return event.charCode >= 48 && event.charCode <= 57'/>
	 	</div>
	 	<div id="box"><input id="submit" type="submit" value="Pay"/></div>
	</div> -->


	<div id="payment-section">
	    <div class="box left">
	        <div class="credit">
	          <img src="images/credit.png">
	        </div>
	    </div>

	    <div class="box right">
	        <div class="details">
	            <p style="font-family: Fjalla One; font-size:40px; text-align: center; margin-bottom:0px;">
	            	Payment Details
	            </p>
				<form class='form' action="" method="post" id="payment-form"> {% csrf_token %}
	        	<div id="text">
		          <div id="information" style="font-size: 20px;">
		            <div class="textinput">Name on Card
		            	<input type="text" class="card" placeholder="Name on Card">
		            </div>
		 			<div class="textinput">Card Number
		 				<input type="text" class="card" maxlength="16" placeholder="Card Number" onkeypress='return event.charCode >= 48 && event.charCode <= 57'/>
		 			</div>
		 			<div class="textinput">
		 				<div>Valid Through &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;CVV</div>
		 				<input type="text" maxlength="7" class="cardvalid" placeholder="MM/YYYY" onkeypress='return event.charCode >= 48 &&  event.charCode== / && event.charCode <= 57'/>
		 				<input id="cvv" type="text" maxlength="3" class="cardcvv" placeholder="CVV" onkeypress='return event.charCode >= 48 && event.charCode <= 57'/>
		          	</div>
		          	<div id="box"><input id="submit" type="submit" value="Pay"/></div>
		          </div>
  				</div>
			</form>
  			</div>
  		</div>
  	</div>


	{% endblock %}
